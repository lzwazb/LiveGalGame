桌面版 PRD（基于 Core User Journey）

目标与定位
- 目标用户：希望提升与特定对象沟通质量、获得实时指导与复盘的用户（如 Persona“小明”）。
- 核心定位：在桌面聊天场景中提供“实时辅助 + 即时反馈 + 复盘学习”的完整闭环。
- 平台：Electron（Windows/macOS），须双平台可打包与运行。
- 非目标：不提供摄像头相关功能；不内置聊天平台（对现有微信/QQ/Discord 等进行并行辅助）。

核心用户旅程（桌面化）
阶段一 准备就绪（Onboarding）
1. 启动与权限
   - 仅请求：麦克风、系统音频（通过屏幕录制/桌面捕获）。逐步解释“为什么需要”，支持稍后再说。
   - Aha 时刻：连接测试成功提示；音频测试听写可见。
2. 引导式配置
   - 选择“AI 大脑”：用结果导向标签（最智能/情感更好/隐私更强）映射到不同模型与推理路径。
   - 输入 API Key/本地端点后可“测试连接”，即时反馈成功与延迟/速率。
3. 创建对话存档
   - 建立“人物档案”：昵称、关系标签（如“暧昧对象”）、备注（偏好、禁忌、背景信息）。
   - 备注直接作为系统提示工程的一部分以提升效果。

阶段二 实时战场（In-Conversation）
1. HUD 无缝融入
   - 点击“开始对话”后，主窗口最小化/驻留托盘；屏幕角落出现半透明 HUD。
   - HUD 不抢焦点，可鼠标穿透/置顶切换；跟随当前活动应用自动调暗/收起。
2. 实时转录
   - 左侧：对方（系统音频/通话）转写；右侧：用户（麦克风）转写。
   - 支持 VAD、去噪、分段；最近 30-60 秒可滚动回看；关键词高亮。
3. AI 建议触发（Magic Moment）
   - 基于对方语句意图识别（问候/邀约/抱怨/转场等）和目标（增进好感/转移话题/婉拒）。
   - 生成 2-3 张“建议卡片”：标题+一句话+标签+效果预测（❤️±X）。
   - 选择后进入编辑框，可一键复制/朗读提示（可选 TTS）。
4. 即时反馈
   - 监听用户发送或口述完成后，HUD 播放好感度动画（从 50→70，绿色“+20”上浮）。
   - HUD 显示轻量解释“为什么有效”，强化正反馈。

阶段三 复盘进化（Post-Conversation）
1. 数据沉淀
   - 主窗体“人物卡”展示对话次数、当前好感度、最近一次时间。
2. 可视化进程
   - 人物详情含“好感度变化曲线”“关键事件时间轴（触发点/建议卡/结果）”。
3. AI 复盘分析
   - 结构化报告：做得好/可改进/下次建议；可导出或收藏为“提示模板”。

成功指标（北极星与 KPI）
- Onboarding 完成率（安装→连接测试→音频测试→创建首个存档）≥ 70%
- 首次 Real-time 建议触发率 ≥ 60%，建议被采用率 ≥ 40%
- 单次对话后留存（次日/7 日）≥ 30%/15%
- 复盘页打开率 ≥ 50%，报告完整阅读率 ≥ 30%

范围与约束
- 不采集摄像头；不读取通讯录；仅在本地存储对话转写和评分（可选云同步）。
- macOS 需屏幕录制权限用于系统音频；Windows 通过 desktopCapturer + WASAPI。
- 模型可选：云端（OpenAI/Anthropic 等）、本地（如 Oobabooga/LLM 推理服务）；需可切换与默认选择。

验收标准（MVP）
- Win/mac 可安装运行；首次引导含连接测试与音频测试。
- HUD 能在微信/Discord 上稳定悬浮，展示双通道转写与建议卡。
- 好感度动画与结果记录可回看；复盘页可生成基础结构化报告。


