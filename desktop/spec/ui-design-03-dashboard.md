# UI 设计文档：仪表板 / 主页（概览与对话列表）

> **原型图参考**：Image 3 - 欢迎回来！（Dashboard 主页）  
> **对应功能**：攻略对象列表、对话统计、最近对话、新建对话

---

## 1. 整体布局

### 1.1 页面属性
- **页面类型**：主窗口内容区域
- **尺寸**：全屏适配，最小 1200px × 800px
- **背景**：浅白色 `#F5F7FA`
- **滚动**：内容区支持垂直滚动

### 1.2 整体结构（分两列）
```
┌─────────────────────────────────────────────────────────────────┐
│ [侧边栏]                    [主内容区]                          │
│                                                                 │
│ ◆ 总览 ✓                   欢迎回来！                           │
│ ◆ 攻略对象                  这是你的对话项目快照。              │
│ ◆ 对话编辑器                                                   │
│ ◆ LLM 配置          ┌─────────────────────────────┐           │
│ ◆ 设置              │ 攻略对象: 12                 │           │
│                    │ 对话: 89                    │           │
│                    │ 分享: 256                   │           │
│                    │ 故事标记: 42                │           │
│ [帮助]              └─────────────────────────────┘           │
│ [报告问题]                                                      │
│ [登出]              ┌─────────────────────────────────────────┐│
│                    │ 最近对话                   [实时助手]     ││
│                    │ "我"与攻略对象的聊天日志摘要。           ││
│                    │                    [新对话]              ││
│                    │                                         ││
│                    │ 第1章：命运的相遇                        ││
│                    │ 优衣在樱花丛中与优司见面，命运的奇缘...  ││
│                    │ 攻略对象: [Miyu] [Akira] [Hana] [Yuki] ││
│                    │ 最后编辑: 2天前                         ││
│                    │                                         ││
│                    │ 咖啡馆的误会                             ││
│                    │ 一个关键的冲突场景。她与男主在咖啡馆...  ││
│                    │ 攻略对象: [Miyu] [Akira]                ││
│                    │ 最后编辑: 5天前                         ││
│                    │                                         ││
│                    │ 图书馆的告白                             ││
│                    │ 一个感人的逆转，优衣在学校图书馆学习...  ││
│                    │ 攻略对象: [Miyu]                        ││
│                    │ 最后编辑: 1周前                         ││
│                    │                                         ││
│                    │ [+ 创建新对话]                           ││
│                    │ 从头开始一段新对话。                      ││
│                    │                                         ││
│                    └─────────────────────────────────────────┘│
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 侧边栏导航（同 LLM Config 页）

### 2.1 导航结构
- 与 LLM 配置页相同的侧边栏设计
- 当前高亮项：`◆ 总览 ✓`

### 2.2 样式参考
- 宽度：280px
- 背景：品牌粉红渐变
- 参考 `ui-design-02-llm-config.md` 第 2 节

---

## 3. 顶部欢迎区

### 3.1 欢迎标题
```
欢迎回来！
这是你的对话项目快照。
```

- **位置**：主内容区顶部，内边距 40px
- **背景**：白色 `#FFFFFF`，底部 1px 边框 `#E5E7EB`
- **标题**：
  - 文字：`欢迎回来！`
  - 字体：32px，粗体 700，颜色 `#1F2937`
  - 下边距：12px
- **副标题**：
  - 文字：`这是你的对话项目快照。`
  - 字体：15px，颜色 `#6B7280`
  - 下边距：0px

---

## 4. 统计卡片区域

### 4.1 卡片布局
```
┌──────────────────┬──────────────────┬──────────────────┬──────────────────┐
│ 攻略对象         │ 对话              │ 分享              │ 故事标记         │
│ 12              │ 89               │ 256              │ 42               │
└──────────────────┴──────────────────┴──────────────────┴──────────────────┘
```

- **布局**：4 列网格，`gap: 16px`
- **容器**：内边距 40px（同欢迎区）
- **背景**：`#F5F7FA`（页面背景）

### 4.2 单个统计卡片
- **宽度**：calc(25% - 12px)（4 列等宽）
- **背景**：白色 `#FFFFFF`
- **圆角**：12px
- **内边距**：24px 20px
- **边框**：1px solid `#E5E7EB`
- **阴影**：`0 1px 3px rgba(0, 0, 0, 0.1)`
- **Hover**：
  - 阴影升高到 `0 4px 12px rgba(0, 0, 0, 0.15)`
  - 过渡 200ms ease
  - 指针变为 pointer（可点击查看详情）

### 4.3 卡片内容
- **标签**（上）：
  - 文字：`攻略对象`、`对话`、`分享`、`故事标记`
  - 字体：13px，颜色 `#6B7280`
  - 下边距：8px
  
- **数字**（下）：
  - 数值：`12`、`89`、`256`、`42`
  - 字体：36px，粗体 700，颜色 `#1F2937`
  - 对齐：左对齐

### 4.4 响应式
- **宽度 ≥ 1200px**：4 列
- **宽度 1000px ~ 1199px**：3 列（最后一列换行）
- **宽度 768px ~ 999px**：2 列
- **宽度 < 768px**：1 列

---

## 5. 最近对话区域

### 5.1 区域容器
- **内边距**：40px
- **背景**：`#F5F7FA`（页面背景）

### 5.2 区域头部（标题 + 操作按钮）
```
最近对话                   [实时助手] [新对话]
"我"与攻略对象的聊天日志摘要。
```

- **布局**：Flex row，`justify-content: space-between`
- **左侧**：
  - **标题**：`最近对话`，22px 粗体 700，颜色 `#1F2937`
  - **副标题**：`"我"与攻略对象的聊天日志摘要。`，13px，颜色 `#6B7280`，下边距 16px

- **右侧**（操作按钮）：
  - **[实时助手]** 按钮
    - 尺寸：高 36px，宽 120px
    - 背景：品牌粉红 `#D91B5C`
    - 文字：白色，13px 粗体
    - 圆角：8px
    - Hover：背景 `#C2185B`
    - 左侧图标：⏱（时钟符号）
  
  - **[新对话]** 按钮
    - 尺寸：高 36px，宽 120px
    - 背景：品牌粉红 `#D91B5C`
    - 文字：白色，13px 粗体
    - 圆角：8px
    - Hover：背景 `#C2185B`
    - 左侧图标：+ （加号）

---

## 6. 对话卡片列表

### 6.1 卡片整体容器
- **背景**：白色 `#FFFFFF`
- **圆角**：12px
- **边框**：1px solid `#E5E7EB`
- **溢出**：`overflow: hidden`（圆角裁剪）
- **最大宽度**：900px
- **阴影**：`0 1px 3px rgba(0, 0, 0, 0.1)`，hover 升高到 `0 4px 12px rgba(0, 0, 0, 0.15)`

### 6.2 单条对话卡片
```
┌─────────────────────────────────────────────────────────────┐
│ 第1章：命运的相遇                                            │
│ 优衣在樱花丛中与优司见面，命运的奇缘...                      │
│ 攻略对象: [Miyu] [Akira] [Hana] [Yuki]                     │
│ 最后编辑: 2天前                                             │
└─────────────────────────────────────────────────────────────┘
```

**布局方式**：垂直堆叠，相邻卡片间有 1px 分隔线 `#E5E7EB`

**样式规范**：
- **内边距**：20px（上下左右）
- **背景**：
  - 默认：白色
  - Hover：极浅灰 `#F9FAFB`
- **过渡**：背景色 200ms ease
- **指针**：pointer（可点击进入对话详情）

#### 卡片头部（标题）
- **文字**：`第1章：命运的相遇`
- **字体**：18px，粗体 600，颜色 `#1F2937`
- **下边距**：8px

#### 卡片主体（描述）
- **文字**：`优衣在樱花丛中与优司见面，命运的奇缘...`
- **字体**：14px，颜色 `#6B7280`
- **行高**：1.6
- **最大行数**：2 行，超出显示省略号 `...`
- **下边距**：12px

#### 卡片底部（元数据）
- **布局**：Flex row，`justify-content: space-between, align-items: center`
- **左侧**：
  - **攻略对象标签**
  - 格式：`攻略对象: [Miyu] [Akira] [Hana] [Yuki]`
  - 每个标签为 inline-pill：
    - 背景：`rgba(217, 27, 92, 0.1)`（极淡粉）
    - 文字：`#D91B5C`（品牌粉色），11px
    - 内边距：4px 8px
    - 圆角：12px
    - 间距：4px
  - 超过 3 个标签时，显示 `+{剩余数}` 标签，点击展开全部
  - 字体标签："攻略对象:" 为 11px，颜色 `#9CA3AF`（灰色）

- **右侧**：
  - **最后编辑时间**
  - 格式：`最后编辑: 2天前`（相对时间）
  - 字体：12px，颜色 `#9CA3AF`
  - Hover 时显示绝对时间（如 "2025-11-10 14:32"）作为 tooltip

#### 交互行为
- **点击卡片**：进入对话详情页面（对应 Image 4）
- **右键菜单**（可选）：
  - 编辑对话名称
  - 删除对话
  - 复制对话链接
  - 导出对话（JSON 或 PDF）

---

## 7. 空状态

### 7.1 无对话记录
显示条件：用户未创建任何对话

```
┌────────────────────────────────┐
│                                │
│      [⊕ 大图标]               │
│                                │
│   还没有对话                   │
│                                │
│  创建第一个对话，开始攻略之旅。 │
│                                │
│    [+ 创建新对话]             │
│                                │
└────────────────────────────────┘
```

**样式**：
- **背景**：白色卡片，圆角 12px，边框 2px dashed `#E5E7EB`
- **内容对齐**：居中
- **图标**：`⊕`，48px，颜色 `#D1D5DB`
- **标题**：`还没有对话`，20px 粗体 600，颜色 `#1F2937`，下边距 8px
- **描述**：14px，颜色 `#6B7280`
- **按钮**：`+ 创建新对话`，品牌粉红背景

---

## 8. 创建新对话模态框

### 8.1 触发方式
点击 "[新对话]" 按钮或空状态中的 "[+ 创建新对话]" 按钮

### 8.2 对话框属性
- **宽度**：550px
- **背景**：白色
- **圆角**：12px
- **阴影**：`0 10px 40px rgba(0, 0, 0, 0.2)`

### 8.3 对话框结构
```
┌────────────────────────────────────────────┐
│ 创建新对话                             [×] │
├────────────────────────────────────────────┤
│ 对话标题（选填）：                         │
│ ┌──────────────────────────────────────┐  │
│ │ 例：第1章：命运的相遇              │  │
│ └──────────────────────────────────────┘  │
│                                            │
│ 描述（选填）：                             │
│ ┌──────────────────────────────────────┐  │
│ │ 例：主角与女主在樱花树下相遇...     │  │
│ │                                      │  │
│ └──────────────────────────────────────┘  │
│                                            │
│ 涉及的攻略对象：                           │
│ ◇ Miyu (暧昧)                              │
│ ◇ Akira (朋友)                             │
│ ◇ Hana (竞争对手)                         │
│ ◇ Yuki (闺蜜)                              │
│                                            │
│                    [创建]  [取消]         │
└────────────────────────────────────────────┘
```

### 8.4 字段定义

#### 对话标题输入
- **标签**：`对话标题（选填）：`，13px 粗体 600
- **输入框**：
  - 高 40px
  - 背景 `#F9FAFB`，边框 1px `#D1D5DB`
  - 圆角 6px
  - Placeholder：`例：第1章：命运的相遇`，颜色 `#9CA3AF`
  - Focus：边框 `#D91B5C`，阴影 `0 0 0 3px rgba(217, 27, 92, 0.1)`

#### 描述输入
- **标签**：`描述（选填）：`，13px 粗体 600
- **文本框**：
  - 高 100px
  - 背景 `#F9FAFB`，边框 1px `#D1D5DB`
  - 圆角 6px
  - Placeholder：`例：主角与女主在樱花树下相遇...`
  - 可调整大小（右下角缩放手柄）
  - Focus：边框 `#D91B5C`

#### 攻略对象选择
- **标签**：`涉及的攻略对象：`，13px 粗体 600，下边距 12px
- **对象列表**：
  - 显示应用中已有的所有攻略对象
  - 每个对象为一个 checkbox + 标签
  - **Checkbox 样式**：
    - 未选中：空心圆 `◇`，颜色 `#D1D5DB`
    - 选中：实心圆 `◆`，颜色 `#D91B5C`
  - **标签**：
    - 文字：`Miyu (暧昧)`
    - 字体：13px，颜色 `#374151`
    - 左边距 8px（checkbox 后）
  - **行间距**：12px

### 8.5 按钮栏
```
                    [创建]  [取消]
```

- **[创建]** 按钮
  - 背景：品牌粉红 `#D91B5C`
  - 文字：白色，13px 粗体
  - 内边距：10px 32px
  - 圆角：6px
  - Hover：背景 `#C2185B`
  - 禁用：标题为空时，opacity 0.5，pointer-events none

- **[取消]** 按钮
  - 背景：透明，边框 1px `#D1D5DB`
  - 文字：`#374151`，13px 粗体
  - 内边距：10px 32px
  - 圆角：6px
  - Hover：背景 `#F3F4F6`

---

## 9. 实时助手功能（侧板）

### 9.1 侧板触发
点击 "[实时助手]" 按钮时，从右侧滑出一个侧板

### 9.2 侧板属性
- **宽度**：350px
- **位置**：固定定位，右侧，从 `translateX(100%)` 滑入到 `translateX(0)`
- **高度**：100vh
- **背景**：白色 `#FFFFFF`，左边 1px 分隔线 `#E5E7EB`
- **z-index**：确保在主内容上方（但低于模态框）
- **动画**：300ms ease-out

### 9.3 侧板内容（可选扩展功能，暂简化）
```
┌────────────────────────────┐
│ 实时助手                [×]│
├────────────────────────────┤
│                            │
│ [录制按钮]                 │
│                            │
│ 对话建议：                 │
│ ...                        │
│                            │
└────────────────────────────┘
```

- 暂定为简化版本，功能延后：保留 UI 框架，内容可扩展

---

## 10. 页面转换动画

### 10.1 卡片加载动画
- 对话卡片从底部以 stagger 效果进入（300ms ease-out）
- 每张卡片间隔 50ms

### 10.2 对话框打开/关闭
- **打开**：`scale: 0.9, opacity: 0` 到 `scale: 1, opacity: 1`，200ms ease-out
- **关闭**：反向，200ms ease-in
- **背景 overlay**：`rgba(0, 0, 0, 0)` 到 `rgba(0, 0, 0, 0.5)`，同步过渡

---

## 11. 响应式设计

### 11.1 桌面版（≥ 1200px）
- 侧边栏固定 280px
- 统计卡片 4 列
- 对话卡片最大宽度 900px

### 11.2 平板版（768px ~ 1199px）
- 侧边栏可折叠（汉堡菜单）
- 统计卡片 2 列
- 对话卡片宽度自适应

### 11.3 移动/小窗口版（< 768px）
- 侧边栏隐藏，导航改为顶部
- 统计卡片 1 列
- 对话卡片全宽

---

## 12. 键盘快捷键 & 无障碍

### 12.1 快捷键
- **Ctrl+N**：打开"新对话"对话框
- **Ctrl+K**：搜索对话
- **Enter**：激活聚焦的卡片或按钮
- **Escape**：关闭对话框或侧板

### 12.2 屏幕阅读器
- 统计卡片有 `role="region"` 和 `aria-label`
- 对话卡片有 `role="button"` 或 `<a>` 标签（可聚焦、可激活）
- 模态框有 `role="dialog"` 和 `aria-modal="true"`

### 12.3 颜色对比度
- 所有文字与背景对比度 ≥ 4.5:1

---

## 13. 技术实现提示

### 13.1 React 组件结构
```jsx
<DashboardPage>
  <Sidebar activeTab="overview" />
  <MainContent>
    <WelcomeSection title="欢迎回来！" subtitle="..." />
    <StatsGrid stats={[12, 89, 256, 42]} />
    <RecentConversationsSection>
      {conversations.length > 0 ? (
        <ConversationList conversations={conversations} />
      ) : (
        <EmptyState onCreateNew={openNewConversationModal} />
      )}
    </RecentConversationsSection>
  </MainContent>

  {showNewConversationModal && (
    <NewConversationModal 
      onConfirm={handleCreateConversation}
      onClose={closeModal}
    />
  )}

  {showLiveAssistant && (
    <LiveAssistantSidebar onClose={closeSidebar} />
  )}
</DashboardPage>
```

### 13.2 样式方案
- **Tailwind CSS** + 自定义变量
- **Framer Motion** 处理卡片和模态框动画

### 13.3 状态管理
- 使用 **Zustand** 或 **Jotai** 管理对话列表
- 使用 **React Query** 缓存对话统计数据
- 模态框和侧板状态独立管理

---

## 14. 设计资源清单

### 14.1 图标
- 时钟 ⏱、加号 +、×、菱形 ◇◆、大加号 ⊕、复选框 ☑

### 14.2 颜色变量表
```css
:root {
  --brand-primary: #D91B5C;
  --brand-gradient: linear-gradient(135deg, #D91B5C 0%, #C2185B 100%);
  
  --bg-page: #F5F7FA;
  --bg-card: #FFFFFF;
  --bg-input: #F9FAFB;
  --bg-sidebar: var(--brand-gradient);
  
  --text-primary: #1F2937;
  --text-secondary: #6B7280;
  --text-muted: #9CA3AF;
  
  --border-default: #E5E7EB;
  --border-dark: #D1D5DB;
  
  --tag-bg: rgba(217, 27, 92, 0.1);
  --tag-text: #D91B5C;
}
```

---

## 15. 验收标准

### 15.1 视觉还原度
- [ ] 欢迎标题和副标题排版正确
- [ ] 统计卡片网格布局和对齐准确
- [ ] 对话卡片标题、描述、标签、时间排版清晰
- [ ] 攻略对象标签颜色与原型一致
- [ ] 空状态图标和文字居中

### 15.2 交互流畅性
- [ ] 卡片加载 stagger 动画平滑（60fps）
- [ ] 对话框打开/关闭无闪烁
- [ ] 按钮 hover/click 反应 < 100ms
- [ ] 侧板滑入/滑出流畅

### 15.3 功能完整性
- [ ] 新建对话弹窗正常打开
- [ ] 对话标题和描述输入正常
- [ ] 攻略对象复选框可正常选中/取消
- [ ] 创建对话后，卡片出现在列表顶部
- [ ] 点击对话卡片进入详情页
- [ ] 实时助手侧板可打开/关闭

### 15.4 跨平台一致性
- [ ] Windows 和 macOS 侧边栏宽度一致
- [ ] 统计卡片在两平台渲染一致
- [ ] 字体清晰

---

**文档版本**：v1.0  
**最后更新**：2025-11-12  
**维护者**：产品设计团队

